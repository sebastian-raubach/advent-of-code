"use strict";(self["webpackChunkadvent_of_code"]=self["webpackChunkadvent_of_code"]||[]).push([[1008],{5283:function(e,t,s){s.r(t),s.d(t,{default:function(){return f}});var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Day",{attrs:{day:20,year:2023,solutions:e.solutions},on:{"input-changed":e.onInputChanged},scopedSlots:e._u([{key:"partOne",fn:function(){return[s("p",{staticClass:"text-info"},[e._v("The output below can be saved as a text file each and loaded into "),s("a",{attrs:{href:"https://helium.hutton.ac.uk"}},[e._v("Helium")]),e._v(" to visualize the graph structure as well as the importance of each node.")]),s("pre",{staticClass:"year-2023-day-20-code border"},[s("code",{domProps:{innerHTML:e._s(e.pedigreeFile)}}),e._v("\n      ")]),s("pre",{staticClass:"year-2023-day-20-code border"},[s("code",{domProps:{innerHTML:e._s(e.traitFile)}}),e._v("\n      ")])]},proxy:!0}])})},o=[],r=s(86889),l=s(24002);const u="%",a="&",c="broadcaster";var i={components:{Day:r.Z},data:function(){return{solutions:{partOne:null,partTwo:null},pedigreeFile:null,traitFile:null}},methods:{onInputChanged:function(e){let t=this.parse(e),s="Line\tParent\n",n="#heliumInput = PHENOTYPE\nLineName\tNodeType\n";Object.keys(t).forEach((e=>{t[e].sources&&t[e].sources.forEach((t=>{s+=`${e}\t${t}\n`})),n+=`${e}\t${t[e].type}\n`})),this.pedigreeFile=s,this.traitFile=n,this.solutions.partOne=this.solve(t,!1),t=this.parse(e),this.solutions.partTwo=this.solve(t,!0)},parse:function(e){const t={};return e.forEach((e=>{const[s,n]=e.split(" -> ").map(((e,t)=>1===t?e.split(", "):e));let o=null;s.startsWith(u)?o=u:s.startsWith(a)?o=a:"broadcaster"===s&&(o=c);const r=s.replace(/[%&]/g,""),l=t[r]||{name:r,sources:[],targets:[],type:o,highPulsesSent:0,lowPulsesSent:0},i=n.map((e=>t[e]||{name:e,sources:[],targets:[],type:null,highPulsesSent:0,lowPulsesSent:0}));i.forEach((e=>{e.sources.push(l.name),t[e.name]=e})),l.targets.push(...n),l.type=o,l.type===u&&(l.state=!1),t[l.name]=l})),Object.values(t).forEach((e=>{e.type===a&&(e.memory={},e.sources.forEach((t=>{e.memory[t]=!1})))})),t.broadcaster.sources=["button"],t},solve:function(e,t=!1){const s={},n=e.rx.sources[0];e[n].sources.forEach((e=>{s[e]=null}));const o=[],r=(t,s,n)=>{n&&(t?n.highPulsesSent++:n.lowPulsesSent++),o.unshift({pulse:t,module:e[s],sender:n&&n.name||""})};let c=0;const i=()=>{c++,r(!1,"broadcaster");while(o.length>0){const e=o.pop();if(null!==e.module)if("broadcaster"===e.module.type)e.module.targets.forEach((t=>r(!1,t,e.module)));else if(e.module.type!==u||e.pulse){if(e.module.type===a){e.module.name===n&&null===s[e.sender]&&e.pulse&&(s[e.sender]=c),e.module.memory[e.sender]=e.pulse;const t=!Object.values(e.module.memory).every((e=>e));e.module.targets.forEach((s=>r(t,s,e.module)))}}else e.module.state=!e.module.state,e.module.targets.forEach((t=>r(e.module.state,t,e.module)))}};for(let u=0;u<(t?Number.MAX_SAFE_INTEGER:1e3);u++)if(i(),t){const e=Object.values(s);if(e.every((e=>null!=e)))return(0,l.uq)(e)}let d=1e3,h=0;return Object.values(e).forEach((e=>{d+=e.lowPulsesSent,h+=e.highPulsesSent})),d*h}}},d=i,h=s(1001),p=(0,h.Z)(d,n,o,!1,null,null,null),f=p.exports},24002:function(e,t,s){s.d(t,{p4:function(){return o},uq:function(){return a},wQ:function(){return n}});const n=(e,t)=>(e%t+t)%t,o=e=>{const t=e.length,s=e[0].length,n=[];for(let o=0;o<s;o++)n[o]=Array(t);for(let o=0;o<t;o++)for(let t=0;t<s;t++)n[t][o]=e[o][t];return n},r=(e,t)=>0===t?e:r(t,e%t),l=(e,t)=>e/r(e,t)*t,u=e=>e.reduce(l,1),a=e=>u(e)}}]);
//# sourceMappingURL=1008.56d694e7.js.map