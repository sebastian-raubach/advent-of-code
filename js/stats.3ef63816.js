"use strict";(self["webpackChunkadvent_of_code"]=self["webpackChunkadvent_of_code"]||[]).push([[6784],{40595:function(t,e,r){r.r(e),r.d(e,{default:function(){return h}});var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h1",[t._v("Statistics")]),r("h2",[t._v("Input")]),r("p",[t._v("Paste your private leaderboard API JSON into this text area to see some stats.")]),r("b-form",{on:{submit:function(t){t.preventDefault()}}},[r("b-form-group",{attrs:{label:"JSON API input","label-for":"json",description:"The JSON API output of a leaderboard."}},[r("b-form-textarea",{attrs:{rows:"5",id:"json"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1)],1),t.userTraces?[r("h2",[t._v("Points over time")]),r("div",{staticClass:"my-3",attrs:{id:"timeline-chart"}})]:t._e(),t.userTraces?[r("h2",[t._v("Points per day")]),r("div",{staticClass:"my-3",attrs:{id:"per-day-chart"}})]:t._e(),t.userRankingPerDay?[r("h2",[t._v("Ranking over time")]),r("div",{staticClass:"my-3",attrs:{id:"ranking-chart"}})]:t._e(),t.json?[r("h2",[t._v("Stats overview")]),r("p",[t._v("Hover over the stars to see the timestamps for part 1 and part 2 as well as the user's ranking for the day.")]),r("b-table",{attrs:{"table-class":"star-table mt-3",items:t.json,fields:t.fields,stacked:"sm","sort-by":"local_score","sort-desc":!0},scopedSlots:t._u([{key:"cell(days)",fn:function(e){return[t._l(t.tasks,(function(s){return[e.item.completion_day_level[s]&&e.item.completion_day_level[s][2]?r("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.body.html",value:t.getTooltip(s,e.item.completion_day_level[s]),expression:"getTooltip(day, data.item.completion_day_level[day])",modifiers:{body:!0,html:!0}}],key:e.id+"-"+s,staticClass:"star star-gold"},[t._v("★")]):e.item.completion_day_level[s]&&e.item.completion_day_level[s][1]?r("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.body.html",value:t.getTooltip(s,e.item.completion_day_level[s]),expression:"getTooltip(day, data.item.completion_day_level[day])",modifiers:{body:!0,html:!0}}],key:e.id+"-"+s,staticClass:"star star-silver"},[t._v("★")]):r("span",{key:e.id+"-"+s,staticClass:"star star-none"},[t._v("☆")])]}))]}}],null,!1,2878569974)})]:t._e()],2)},a=[],o=r(20629),i={data:function(){return{input:null,tasks:Array.from(Array(25).keys()).map((t=>t+1)),fields:[{key:"name",label:"Name",sortable:!0},{key:"local_score",label:"Score",sortable:!0},{key:"stars",label:"Stars",sortable:!0},{key:"days",label:"Days",class:"stars"}]}},computed:{...(0,o.Se)(["storeDarkMode"]),json:function(){if(!this.input)return null;try{const t=JSON.parse(this.input);return Object.keys(t.members).map((e=>t.members[e])).sort(((t,e)=>t.local_score-e.local_score))}catch(t){return null}},userRankingPerDay:function(){if(this.json){const t=this.tasks.map((t=>{const e=this.json.map(((e,r)=>this.userTraces[r]&&this.userTraces[r][t-1]&&this.userTraces[r][t-1].cumulative||0));return e.sort(((t,e)=>t-e)),e}));return this.json.map(((e,r)=>this.tasks.map((e=>{const s=this.userTraces[r]&&this.userTraces[r][e-1]?this.userTraces[r][e-1].cumulative:null;return void 0!==s&&null!==s?t[e-1].lastIndexOf(s):null}))))}return null},userTraces:function(){return this.json?this.json.map((t=>{let e=0;const r=[];for(let s=0;s<this.tasks.length;s++)if(t.completion_day_level[s+1]){const a=t.completion_day_level[s+1][1]?+t.completion_day_level[s+1][1].get_star_ts:null,o=t.completion_day_level[s+1][2]?+t.completion_day_level[s+1][2].get_star_ts:null;let i=0;if(a){const t=this.sortedUsersPerDay[s].partOne.indexOf(a);i+=this.json.length-t}if(o){const t=this.sortedUsersPerDay[s].partTwo.indexOf(o);i+=this.json.length-t}e+=i,(a||o)&&r.push({cumulative:e,individual:i})}else r.push(null);return r})):null},sortedUsersPerDay:function(){return this.json?this.tasks.map((t=>{const e=this.json.map((e=>e.completion_day_level[t]&&e.completion_day_level[t][1]?+e.completion_day_level[t][1].get_star_ts:null)),r=this.json.map((e=>e.completion_day_level[t]&&e.completion_day_level[t][2]?+e.completion_day_level[t][2].get_star_ts:null));return e.sort(),r.sort(),{partOne:e,partTwo:r}})):null}},watch:{storeDarkMode:function(){this.$nextTick((()=>{this.updatePointChart(),this.updatePointPerDayChart(),this.updateRankingChart()}))},userTraces:function(){this.$nextTick((()=>{this.updatePointChart(),this.updatePointPerDayChart()}))},userRankingPerDay:function(){this.$nextTick((()=>this.updateRankingChart()))}},methods:{updateRankingChart:function(){this.$plotly.purge("ranking-chart");const t=this.userRankingPerDay.map(((t,e)=>({x:t.map(((t,e)=>e+1)),y:t,name:this.json[e].name,mode:"lines+markers",marker:{size:10},line:{width:3}})));this.$plotly.newPlot("ranking-chart",t,{hovermode:"x",height:Math.max(250,30*this.userTraces.length+50),margin:{t:10,b:20,l:50,r:0},paper_bgcolor:"transparent",plot_bgcolor:"transparent",xaxis:{tickfont:{color:this.storeDarkMode?"white":"black"},gridcolor:this.storeDarkMode?"#111111":"#eeeeee"},yaxis:{title:{text:"Ranking",font:{color:this.storeDarkMode?"white":"black"}},tickfont:{color:this.storeDarkMode?"white":"black"},gridcolor:this.storeDarkMode?"#111111":"#eeeeee",tickmode:"array",tickvals:Array.from(Array(this.json.length).keys()),ticktext:Array.from(Array(this.json.length).keys()).map((t=>this.json.length-t))},legend:{bgcolor:"rgba(0,0,0,0)",orientation:"h",traceorder:"reversed",font:{color:this.storeDarkMode?"white":"black"}}},{responsive:!0,displaylogo:!1})},updatePointChart:function(){this.$plotly.purge("timeline-chart");const t=this.userTraces.map(((t,e)=>({x:t.map(((t,e)=>e+1)),y:t.map((t=>t?t.cumulative:null)),name:this.json[e].name,mode:"lines+markers"})));this.$plotly.newPlot("timeline-chart",t,{hovermode:"x",height:Math.max(250,15*this.userTraces.length+50),margin:{t:10,b:20,l:50,r:0},paper_bgcolor:"transparent",plot_bgcolor:"transparent",xaxis:{tickfont:{color:this.storeDarkMode?"white":"black"},gridcolor:this.storeDarkMode?"#111111":"#eeeeee"},yaxis:{title:{text:"Points",font:{color:this.storeDarkMode?"white":"black"}},tickfont:{color:this.storeDarkMode?"white":"black"},gridcolor:this.storeDarkMode?"#111111":"#eeeeee"},legend:{bgcolor:"rgba(0,0,0,0)",orientation:"h",traceorder:"reversed",font:{color:this.storeDarkMode?"white":"black"}}},{responsive:!0,displaylogo:!1})},updatePointPerDayChart:function(){this.$plotly.purge("per-day-chart");const t=this.userTraces.map(((t,e)=>({x:t.map(((t,e)=>e+1)),y:t.map((t=>t?t.individual:null)),name:this.json[e].name,mode:"lines+markers"})));this.$plotly.newPlot("per-day-chart",t,{hovermode:"x",height:Math.max(250,10*this.userTraces.length+50),margin:{t:10,b:20,l:50,r:0},paper_bgcolor:"transparent",plot_bgcolor:"transparent",xaxis:{tickfont:{color:this.storeDarkMode?"white":"black"},gridcolor:this.storeDarkMode?"#111111":"#eeeeee"},yaxis:{title:{text:"Points",font:{color:this.storeDarkMode?"white":"black"}},tickfont:{color:this.storeDarkMode?"white":"black"},gridcolor:this.storeDarkMode?"#111111":"#eeeeee"},legend:{bgcolor:"rgba(0,0,0,0)",orientation:"h",traceorder:"reversed",font:{color:this.storeDarkMode?"white":"black"}}},{responsive:!0,displaylogo:!1})},getTooltip:function(t,e){let r=`<p>Day ${t}</p>`;return e[1]&&e[1].get_star_ts&&(r+=`<p>Part 1: ${new Date(1e3*+e[1].get_star_ts).toLocaleString()} Position: ${this.sortedUsersPerDay[t-1].partOne.indexOf(+e[1].get_star_ts)+1}</p>`),e[2]&&e[2].get_star_ts&&(r+=`<p>Part 2: ${new Date(1e3*+e[2].get_star_ts).toLocaleString()} Position: ${this.sortedUsersPerDay[t-1].partTwo.indexOf(+e[2].get_star_ts)+1}</p>`),r}}},n=i,l=r(1001),c=(0,l.Z)(n,s,a,!1,null,null,null),h=c.exports}}]);
//# sourceMappingURL=stats.3ef63816.js.map