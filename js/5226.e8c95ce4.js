(self["webpackChunkadvent_of_code"]=self["webpackChunkadvent_of_code"]||[]).push([[5226],{7436:function(t,e,s){const{MinHeap:i}=s(78573),{MaxHeap:r}=s(38945),{CustomHeap:o}=s(14295);e.MinHeap=i,e.MaxHeap=r,e.CustomHeap=o},14295:function(t,e,s){
/**
 * @license MIT
 * @copyright 2020 Eyas Ranjous <eyas.ranjous@gmail.com>
 */
const{Heap:i}=s(42613);class r extends i{constructor(t,e,s){if("function"!==typeof t)throw new Error("CustomHeap expects a comparator function");super(e,s),this._comparator=t}_compare(t,e){return this._comparator(t,e)<=0}_compareChildrenBefore(t,e,s){const i=this._comparator(this._nodes[s],this._nodes[e]);return i<=0&&s<t?s:e}clone(){return new r(this._comparator,this._nodes.slice(),this._leaf)}static heapify(t,e){if(!Array.isArray(t))throw new Error(".heapify expects an array");if("function"!==typeof e)throw new Error(".heapify expects a comparator function");return new r(e,t).fix()}static isHeapified(t,e){if(!Array.isArray(t))throw new Error(".heapify expects an array");if("function"!==typeof e)throw new Error(".isHeapified expects a comparator function");return new r(e,t).isValid()}}e.CustomHeap=r},42613:function(t,e){
/**
 * @license MIT
 * @copyright 2020 Eyas Ranjous <eyas.ranjous@gmail.com>
 *
 * @class
 * @abstract
 */
class s{constructor(t,e){this._nodes=Array.isArray(t)?t:[],this._leaf=e||null}_hasLeftChild(t){const e=2*t+1;return e<this.size()}_hasRightChild(t){const e=2*t+2;return e<this.size()}_getKey(t){return"object"===typeof t?t.key:t}_swap(t,e){const s=this._nodes[t];this._nodes[t]=this._nodes[e],this._nodes[e]=s}_compare(t,e){return this._compareKeys(this._getKey(t),this._getKey(e))}_shouldSwap(t,e){return!(t<0||t>=this.size())&&(!(e<0||e>=this.size())&&!this._compare(this._nodes[t],this._nodes[e]))}heapifyUp(t){let e=t,s=Math.floor((e-1)/2);while(this._shouldSwap(s,e))this._swap(s,e),e=s,s=Math.floor((e-1)/2)}_compareChildrenOf(t){if(!this._hasLeftChild(t)&&!this._hasRightChild(t))return-1;const e=2*t+1,s=2*t+2;if(!this._hasLeftChild(t))return s;if(!this._hasRightChild(t))return e;const i=this._compare(this._nodes[e],this._nodes[s]);return i?e:s}_heapifyDown(t){let e=t,s=this._compareChildrenOf(e);while(this._shouldSwap(e,s))this._swap(e,s),e=s,s=this._compareChildrenOf(e)}extractRoot(){if(this.isEmpty())return null;const t=this.root();return this._nodes[0]=this._nodes[this.size()-1],this._nodes.pop(),this._heapifyDown(0),t===this._leaf&&(this._leaf=this.root()),t}_heapifyDownUntil(t){let e,s=0,i=1,r=2;while(i<t)e=this._compareChildrenBefore(t,i,r),this._shouldSwap(s,e)&&this._swap(s,e),s=e,i=2*s+1,r=2*s+2}_clone(t){return new t(this._nodes.slice(),this._leaf)}sort(){for(let t=this.size()-1;t>0;t-=1)this._swap(0,t),this._heapifyDownUntil(t);return this._nodes}insert(t,e){const s=void 0!==e?{key:t,value:e}:t;return this._nodes.push(s),this.heapifyUp(this.size()-1),null!==this._leaf&&this._compare(s,this._leaf)||(this._leaf=s),this}fix(){for(let t=0;t<this.size();t+=1)this.heapifyUp(t);return this}isValid(){const t=e=>{let s=!0,i=!0;if(this._hasLeftChild(e)){const i=2*e+1;if(s=this._compare(this._nodes[e],this._nodes[i]),!s)return!1;s=t(i)}if(this._hasRightChild(e)){const s=2*e+2;if(i=this._compare(this._nodes[e],this._nodes[s]),!i)return!1;i=t(s)}return s&&i};return t(0)}root(){return this.isEmpty()?null:this._nodes[0]}leaf(){return this._leaf}size(){return this._nodes.length}isEmpty(){return 0===this.size()}clear(){this._nodes=[],this._leaf=null}static _heapify(t,e){if(!Array.isArray(t))throw new Error(".heapify expects an array");return new e(t).fix()}static _isHeapified(t,e){return new e(t).isValid()}}e.Heap=s},38945:function(t,e,s){
/**
 * @license MIT
 * @copyright 2020 Eyas Ranjous <eyas.ranjous@gmail.com>
 */
const{Heap:i}=s(42613);class r extends i{_compareKeys(t,e){return t>e}_compareChildrenBefore(t,e,s){const i=this._getKey(this._nodes[e]),r=this._getKey(this._nodes[s]);return r>i&&s<t?s:e}clone(){return super._clone(r)}static heapify(t){return super._heapify(t,r)}static isHeapified(t){return super._isHeapified(t,r)}}e.MaxHeap=r},78573:function(t,e,s){
/**
 * @license MIT
 * @copyright 2019 Eyas Ranjous <eyas.ranjous@gmail.com>
 */
const{Heap:i}=s(42613);class r extends i{_compareKeys(t,e){return t<e}_compareChildrenBefore(t,e,s){const i=this._getKey(this._nodes[e]),r=this._getKey(this._nodes[s]);return r<i&&s<t?s:e}clone(){return super._clone(r)}static heapify(t){return super._heapify(t,r)}static isHeapified(t){return super._isHeapified(t,r)}}e.MinHeap=r},54082:function(t,e,s){const{MinPriorityQueue:i}=s(38192),{MaxPriorityQueue:r}=s(28387),{PriorityQueue:o}=s(25515);t.exports={MinPriorityQueue:i,MaxPriorityQueue:r,PriorityQueue:o}},28387:function(t,e,s){
/**
 * @copyright 2020 Eyas Ranjous <eyas.ranjous@gmail.com>
 * @license MIT
 */
const{MaxHeap:i}=s(7436),{PriorityQueue:r}=s(25515);class o extends r{constructor(t){super(t),this._compare||(this._heap=new i)}}e.MaxPriorityQueue=o},38192:function(t,e,s){
/**
 * @copyright 2020 Eyas Ranjous <eyas.ranjous@gmail.com>
 * @license MIT
 */
const{MinHeap:i}=s(7436),{PriorityQueue:r}=s(25515);class o extends r{constructor(t){super(t),this._compare||(this._heap=new i)}}e.MinPriorityQueue=o},25515:function(t,e,s){
/**
 * @copyright 2020 Eyas Ranjous <eyas.ranjous@gmail.com>
 * @license MIT
 */
const{CustomHeap:i}=s(7436);class r{constructor(t={}){const{priority:e,compare:s}=t;if(s){if("function"!==typeof s)throw new Error(".constructor expects a valid compare function");this._compare=s,this._heap=new i(this._compare)}else{if(void 0!==e&&"function"!==typeof e)throw new Error(".constructor expects a valid priority function");this._priority=e||(t=>+t)}}_getElementWithPriority(t){return{priority:t.key,element:t.value}}size(){return this._heap.size()}isEmpty(){return this._heap.isEmpty()}front(){return this.isEmpty()?null:this._compare?this._heap.root():this._getElementWithPriority(this._heap.root())}back(){return this.isEmpty()?null:this._compare?this._heap.leaf():this._getElementWithPriority(this._heap.leaf())}enqueue(t,e){if(this._compare)return this._heap.insert(t),this;if(e&&Number.isNaN(+e))throw new Error(".enqueue expects a numeric priority");if(Number.isNaN(+e)&&Number.isNaN(this._priority(t)))throw new Error(".enqueue expects a numeric priority or a constructor callback that returns a number");const s=Number.isNaN(+e)?this._priority(t):e;return this._heap.insert(+s,t),this}dequeue(){return this.isEmpty()?null:this._compare?this._heap.extractRoot():this._getElementWithPriority(this._heap.extractRoot())}toArray(){return this._compare?this._heap.clone().sort().reverse():this._heap.clone().sort().map((t=>this._getElementWithPriority(t))).reverse()}clear(){this._heap.clear()}}e.PriorityQueue=r},15922:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Day",{attrs:{day:23,year:2021,solutions:t.solutions},on:{"input-changed":t.onInputChanged}})},r=[],o=s(86889);const{PriorityQueue:n}=s(54082);var a={components:{Day:o.Z},data:function(){return{solutions:{partOne:null,partTwo:null},moveCosts:{A:1,B:10,C:100,D:1e3},rooms:{1:[[3,2],[3,3]],10:[[5,2],[5,3]],100:[[7,2],[7,3]],1e3:[[9,2],[9,3]]},roomsTwo:{1:[[3,2],[3,3],[3,4],[3,5]],10:[[5,2],[5,3],[5,4],[5,5]],100:[[7,2],[7,3],[7,4],[7,5]],1e3:[[9,2],[9,3],[9,4],[9,5]]},hall:[1,2,4,6,8,10,11]}},methods:{onInputChanged:function(t){const e=t.concat(),s=new Map;for(let i=0;i<e.length;i++)for(let t=0;t<e[i].length;t++)if(![" ","#","."].includes(e[i][t])){const r=`${t},${i}`;s.set(r,{isDone:!1,type:this.moveCosts[e[i][t]]})}this.solutions.partOne=this.solve(s,this.rooms)},solve:function(t,e){Object.keys(e).forEach((s=>{const i=e[s];for(let e=i.length-1;e>=0;e--){const r=t.get(`${i[e][0]},${i[e][1]}`);if(void 0===r||r.type!==+s)return;r.isDone=!0}})),console.log(t);const s=new n({compare:(t,e)=>t.costTotal-e.costTotal});s.enqueue({amphipods:t,costTotal:0,costApprox:this.getApproxCost(t,e)});const i=new Map;let r=Number.POSITIVE_INFINITY,o=0;while(s.size()>0){const t=s.dequeue(),n=Array.from(t.amphipods.values()).filter((t=>t.isDone)).length;if(n>o&&(console.log(s.size(),i.size,n),o=n),t.costTotal>r)break;o=Math.max(o,Array.from(t.amphipods.values()).filter((t=>t.isDone)).length),Array.from(t.amphipods.values()).every((t=>t.isDone))?r=Math.min(r,t.costTotal):t.amphipods.forEach(((r,o)=>{if(!r.isDone){const n=o.split(",").map((t=>+t));if(1===n[1]){const a=this.getFreeRoomPosition(n,r.type,t.amphipods,e);if(null!==a){const h=new Map;t.amphipods.forEach(((t,s)=>{s===o?h.set(`${e[r.type][0][0]},${a}`,{isDone:!0,type:t.type}):h.set(s,{isDone:t.isDone,type:t.type})}));const p=this.toString(h),c=i.get(p),u=t.costTotal+this.manhattan(n,[e[r.type][0][0],a])*r.type;(void 0===c||c>u)&&(i.set(p,t.costTotal),s.enqueue({amphipods:h,costTotal:u,costApprox:this.getApproxCost(h,e)}))}}else{const a=this.getHallPositions(n,t.amphipods);a.forEach((a=>{const h=new Map;t.amphipods.forEach(((t,e)=>{e===o?h.set(`${a},1`,{isDone:!1,type:t.type}):h.set(e,{isDone:t.isDone,type:t.type})}));const p=this.toString(h),c=i.get(p),u=t.costTotal+this.manhattan(n,[a,1])*r.type;(void 0===c||c>u)&&(i.set(p,t.costTotal),s.enqueue({amphipods:h,costTotal:u,costApprox:this.getApproxCost(h,e)}))}))}}}))}return r},getFreeRoomPosition:function(t,e,s,i){const r=i[e];for(let n=Math.min(r[0][0],t[0])+1;n<Math.max(r[0][0],t[0]);n++)if(s.has(`${n},1`))return null;let o=null;for(let n=2;n<r.length+2;n++){const t=s.get(`${r[0][0]},${n}`);if(void 0!==t){if(t.type!==e)return null;break}o=n}return o},getHallPositions:function(t,e){for(let i=t[1]-1;i>1;i--)if(e.has(`${t[0]},${i}`))return[];const s=[];for(let i=t[0]-1;i>=this.hall[0];i--)this.hall.includes(i)&&!e.has(`${i},1`)&&s.push(i);for(let i=t[0]+1;i<=this.hall[this.hall.length-1];i++)this.hall.includes(i)&&!e.has(`${i},1`)&&s.push(i);return s},getApproxCost:function(t,e){let s=0;return t.forEach(((t,i)=>{const r=i.split(",").map((t=>+t)),o=e[t.type][e[t.type].length-1];1===r[1]?s+=this.manhattan(r,o)*t.type:s+=(e[t.type].length+Math.abs(r[1]-1)+Math.abs(r[0]-o[0]))*t.type})),s},manhattan:function(t,e){return Math.abs(t[0]-e[0])+Math.abs(t[1]-e[1])},toString:function(t){return Array.from(t.keys()).sort().map((e=>`${e},${t.get(e).type}`)).join("|")}}},h=a,p=s(1001),c=(0,p.Z)(h,i,r,!1,null,"8b2e0644",null),u=c.exports}}]);
//# sourceMappingURL=5226.e8c95ce4.js.map