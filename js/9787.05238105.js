"use strict";(self["webpackChunkadvent_of_code"]=self["webpackChunkadvent_of_code"]||[]).push([[9787],{33346:function(t,n,e){e.r(n),e.d(n,{default:function(){return l}});var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("Day",{attrs:{day:22,year:2023,solutions:t.solutions},on:{"input-changed":t.onInputChanged},scopedSlots:t._u([{key:"partOne",fn:function(){return[e("div",{ref:"partOne"})]},proxy:!0}])})},r=[],s=e(86889),o={components:{Day:s.Z},data:function(){return{solutions:{partOne:null,partTwo:null}}},methods:{onInputChanged:function(t){const n=t.map(((t,n)=>{const[e,a]=t.split("~"),[r,s,o]=e.split(",").map(Number),[i,h,u]=a.split(",").map(Number);return{start:{x:r,y:s,z:o},end:{x:i,y:h,z:u},below:[],above:[],name:`${n}`}}));n.sort(((t,n)=>Math.min(t.start.z,t.end.z)-Math.min(n.start.z,n.end.z)||Math.min(t.start.y,t.end.y)-Math.min(n.start.y,n.end.y)||Math.min(t.start.z,t.end.x)-Math.min(n.start.z,n.end.x))),this.drop(n,!0);const e={};n.forEach((t=>{e[t.name]=t})),this.solutions.partOne=n.filter((t=>0===t.above.length||t.above.every((t=>e[t].below.length>1)))).length;const a=JSON.stringify(n);this.solutions.partTwo=n.map((t=>{const n=JSON.parse(a).filter((n=>t.name!==n.name));return this.drop(n,!1)})).reduce(((t,n)=>t+n)),this.$nextTick((()=>this.plot(n)))},getPoints:function(t){return[{x:t.start.x,y:t.start.y,z:t.start.z},{x:t.end.x+1,y:t.start.y,z:t.start.z},{x:t.start.x,y:t.end.y+1,z:t.start.z},{x:t.end.x+1,y:t.end.y+1,z:t.start.z},{x:t.start.x,y:t.start.y,z:t.end.z+1},{x:t.end.x+1,y:t.start.y,z:t.end.z+1},{x:t.start.x,y:t.end.y+1,z:t.end.z+1},{x:t.end.x+1,y:t.end.y+1,z:t.end.z+1}]},plot:function(t){this.$plotly.purge(this.$refs.partOne);const n=[];let e=0;t.forEach((t=>{const a=this.getPoints(t);e=Math.max(e,Math.max(...a.map((t=>t.z)))),n.push({x:a.map((t=>t.x)),y:a.map((t=>t.y)),z:a.map((t=>t.z)),alphahull:0,opacity:1,type:"mesh3d"})})),this.$plotly.newPlot(this.$refs.partOne,n,{height:10*e,scene:{aspectratio:{x:1,y:1,z:10}},autosize:!0,automargin:!1,showlegend:!1,margin:{t:10,b:40,l:50,r:0},paper_bgcolor:"transparent",plot_bgcolor:"transparent"},{responsive:!0,displaylogo:!1})},drop:function(t,n){const e=new Set;return t.forEach((a=>{while(a.start.z>1&&a.end.z>1){const r=t.filter((t=>Math.max(t.start.z,t.end.z)===Math.min(a.start.z,a.end.z)-1)),s=this.getTouching(a,r);if(n&&(a.below=s.map((t=>t.name)),s.forEach((t=>t.above.push(a.name)))),s.length>0)return;a.start.z--,a.end.z--,e.add(a.name)}})),e.size},onSegment:function(t,n,e){return n.x<=Math.max(t.x,e.x)&&n.x>=Math.min(t.x,e.x)&&n.y<=Math.max(t.y,e.y)&&n.y>=Math.min(t.y,e.y)},orientation:function(t,n,e){const a=(n.y-t.y)*(e.x-n.x)-(n.x-t.x)*(e.y-n.y);return 0===a?0:a>0?1:2},intersect:function(t,n,e,a){const r=this.orientation(t,n,e),s=this.orientation(t,n,a),o=this.orientation(e,a,t),i=this.orientation(e,a,n);return r!==s&&o!==i||(!(0!==r||!this.onSegment(t,e,n))||(!(0!==s||!this.onSegment(t,a,n))||(!(0!==o||!this.onSegment(e,t,a))||!(0!==i||!this.onSegment(e,n,a)))))},getTouching:function(t,n){return n.filter((n=>this.intersect(t.start,t.end,n.start,n.end)))}}},i=o,h=e(1001),u=(0,h.Z)(i,a,r,!1,null,null,null),l=u.exports}}]);
//# sourceMappingURL=9787.05238105.js.map