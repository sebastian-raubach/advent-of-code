(self["webpackChunkadvent_of_code"]=self["webpackChunkadvent_of_code"]||[]).push([[1492,1978],{97612:(t,o,e)=>{"use strict";e.r(o),e.d(o,{default:()=>h});var n=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("Day",{attrs:{day:23,year:2021,solutions:t.solutions},on:{"input-changed":t.onInputChanged}})},r=[],a=(e(92222),e(66992),e(51532),e(41539),e(78783),e(33948),e(26699),e(54747),e(47941),e(9653),e(57327),e(91038),e(21249),e(74916),e(23123),e(39714),e(32023),e(69600),e(2707),e(70173)),s=e(54082),i=s.PriorityQueue;const c={components:{Day:a["default"]},data:function(){return{solutions:{partOne:null,partTwo:null},moveCosts:{A:1,B:10,C:100,D:1e3},rooms:{1:[[3,2],[3,3]],10:[[5,2],[5,3]],100:[[7,2],[7,3]],1e3:[[9,2],[9,3]]},roomsTwo:{1:[[3,2],[3,3],[3,4],[3,5]],10:[[5,2],[5,3],[5,4],[5,5]],100:[[7,2],[7,3],[7,4],[7,5]],1e3:[[9,2],[9,3],[9,4],[9,5]]},hall:[1,2,4,6,8,10,11]}},methods:{onInputChanged:function(t){for(var o=t.concat(),e=new Map,n=0;n<o.length;n++)for(var r=0;r<o[n].length;r++)if(![" ","#","."].includes(o[n][r])){var a="".concat(r,",").concat(n);e.set(a,{isDone:!1,type:this.moveCosts[o[n][r]]})}this.solutions.partOne=this.solve(e,this.rooms)},solve:function(t,o){var e=this;Object.keys(o).forEach((function(e){for(var n=o[e],r=n.length-1;r>=0;r--){var a=t.get("".concat(n[r][0],",").concat(n[r][1]));if(void 0===a||a.type!==+e)return;a.isDone=!0}})),console.log(t);var n=new i({compare:function(t,o){return t.costTotal-o.costTotal}});n.enqueue({amphipods:t,costTotal:0,costApprox:this.getApproxCost(t,o)});var r=new Map,a=Number.POSITIVE_INFINITY,s=0,c=function(){var t=n.dequeue(),i=Array.from(t.amphipods.values()).filter((function(t){return t.isDone})).length;if(i>s&&(console.log(n.size(),r.size,i),s=i),t.costTotal>a)return"break";s=Math.max(s,Array.from(t.amphipods.values()).filter((function(t){return t.isDone})).length),Array.from(t.amphipods.values()).every((function(t){return t.isDone}))?a=Math.min(a,t.costTotal):t.amphipods.forEach((function(a,s){if(!a.isDone){var i=s.split(",").map((function(t){return+t}));if(1===i[1]){var c=e.getFreeRoomPosition(i,a.type,t.amphipods,o);if(null!==c){var u=new Map;t.amphipods.forEach((function(t,e){e===s?u.set("".concat(o[a.type][0][0],",").concat(c),{isDone:!0,type:t.type}):u.set(e,{isDone:t.isDone,type:t.type})}));var l=e.toString(u),p=r.get(l),h=t.costTotal+e.manhattan(i,[o[a.type][0][0],c])*a.type;(void 0===p||p>h)&&(r.set(l,t.costTotal),n.enqueue({amphipods:u,costTotal:h,costApprox:e.getApproxCost(u,o)}))}}else{var f=e.getHallPositions(i,t.amphipods);f.forEach((function(c){var u=new Map;t.amphipods.forEach((function(t,o){o===s?u.set("".concat(c,",1"),{isDone:!1,type:t.type}):u.set(o,{isDone:t.isDone,type:t.type})}));var l=e.toString(u),p=r.get(l),h=t.costTotal+e.manhattan(i,[c,1])*a.type;(void 0===p||p>h)&&(r.set(l,t.costTotal),n.enqueue({amphipods:u,costTotal:h,costApprox:e.getApproxCost(u,o)}))}))}}}))};while(n.size()>0){var u=c();if("break"===u)break}return a},getFreeRoomPosition:function(t,o,e,n){for(var r=n[o],a=Math.min(r[0][0],t[0])+1;a<Math.max(r[0][0],t[0]);a++)if(e.has("".concat(a,",",1)))return null;for(var s=null,i=2;i<r.length+2;i++){var c=e.get("".concat(r[0][0],",").concat(i));if(void 0!==c){if(c.type!==o)return null;break}s=i}return s},getHallPositions:function(t,o){for(var e=t[1]-1;e>1;e--)if(o.has("".concat(t[0],",").concat(e)))return[];for(var n=[],r=t[0]-1;r>=this.hall[0];r--)this.hall.includes(r)&&!o.has("".concat(r,",1"))&&n.push(r);for(var a=t[0]+1;a<=this.hall[this.hall.length-1];a++)this.hall.includes(a)&&!o.has("".concat(a,",1"))&&n.push(a);return n},getApproxCost:function(t,o){var e=this,n=0;return t.forEach((function(t,r){var a=r.split(",").map((function(t){return+t})),s=o[t.type][o[t.type].length-1];1===a[1]?n+=e.manhattan(a,s)*t.type:n+=(o[t.type].length+Math.abs(a[1]-1)+Math.abs(a[0]-s[0]))*t.type})),n},manhattan:function(t,o){return Math.abs(t[0]-o[0])+Math.abs(t[1]-o[1])},toString:function(t){return Array.from(t.keys()).sort().map((function(o){return"".concat(o,",").concat(t.get(o).type)})).join("|")}}},u=c;var l=e(1001),p=(0,l.Z)(u,n,r,!1,null,"8b2e0644",null);const h=p.exports},48457:(t,o,e)=>{"use strict";var n=e(17854),r=e(49974),a=e(46916),s=e(47908),i=e(53411),c=e(97659),u=e(4411),l=e(26244),p=e(86135),h=e(18554),f=e(71246),v=n.Array;t.exports=function(t){var o=s(t),e=u(this),n=arguments.length,d=n>1?arguments[1]:void 0,y=void 0!==d;y&&(d=r(d,n>2?arguments[2]:void 0));var m,g,x,A,T,D,b=f(o),w=0;if(!b||this==v&&c(b))for(m=l(o),g=e?new this(m):v(m);m>w;w++)D=y?d(o[w],w):o[w],p(g,w,D);else for(A=h(o,b),T=A.next,g=e?new this:[];!(x=a(T,A)).done;w++)D=y?i(A,d,[x.value,w],!0):x.value,p(g,w,D);return g.length=w,g}},53411:(t,o,e)=>{var n=e(19670),r=e(99212);t.exports=function(t,o,e,a){try{return a?o(n(e)[0],e[1]):o(e)}catch(s){r(t,"throw",s)}}},84964:(t,o,e)=>{var n=e(5112),r=n("match");t.exports=function(t){var o=/./;try{"/./"[t](o)}catch(e){try{return o[r]=!1,"/./"[t](o)}catch(n){}}return!1}},3929:(t,o,e)=>{var n=e(17854),r=e(47850),a=n.TypeError;t.exports=function(t){if(r(t))throw a("The method doesn't accept regular expressions");return t}},91038:(t,o,e)=>{var n=e(82109),r=e(48457),a=e(17072),s=!a((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:s},{from:r})},26699:(t,o,e)=>{"use strict";var n=e(82109),r=e(41318).includes,a=e(51223);n({target:"Array",proto:!0},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a("includes")},69600:(t,o,e)=>{"use strict";var n=e(82109),r=e(1702),a=e(68361),s=e(45656),i=e(9341),c=r([].join),u=a!=Object,l=i("join",",");n({target:"Array",proto:!0,forced:u||!l},{join:function(t){return c(s(this),void 0===t?",":t)}})},32023:(t,o,e)=>{"use strict";var n=e(82109),r=e(1702),a=e(3929),s=e(84488),i=e(41340),c=e(84964),u=r("".indexOf);n({target:"String",proto:!0,forced:!c("includes")},{includes:function(t){return!!~u(i(s(this)),i(a(t)),arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=1492-legacy.aae2c38d.js.map