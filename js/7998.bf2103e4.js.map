{"version":3,"file":"js/7998.bf2103e4.js","mappings":"0KAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,IAAM,GAAG,KAAO,KAAK,UAAYN,EAAIO,WAAWC,GAAG,CAAC,gBAAgBR,EAAIS,iBAAiB,EACtMC,EAAkB,G,WCOtB,GACAC,WAAAA,CACAC,IAAAA,EAAAA,GAEAC,KAAAA,WACA,OACAN,UAAAA,CACAO,QAAAA,KACAC,QAAAA,MAGA,EACAC,QAAAA,CACAC,WAAAA,SAAAA,GACA,WAOA,OANAC,EAAAA,SAAAA,CAAAA,EAAAA,KACAC,EAAAA,SAAAA,CAAAA,EAAAA,EAAAA,KACAC,EAAAA,EAAAA,OAAAA,EAAAA,GAAAA,EAAAA,EAAAA,OAAAA,EAAAA,IAAAA,GACAA,EAAAA,EAAAA,OAAAA,EAAAA,GAAAA,GAAAA,CAAAA,GACA,IAEA,CACA,EACAC,YAAAA,SAAAA,GACA,WAOA,OANAH,EAAAA,SAAAA,CAAAA,EAAAA,EAAAA,KACAC,EAAAA,SAAAA,CAAAA,EAAAA,KACAC,EAAAA,GAAAA,EAAAA,IAAAA,GACAA,EAAAA,GAAAA,EAAAA,OAAAA,EAAAA,GAAAA,CAAAA,GACA,IAEA,CACA,EACAX,eAAAA,SAAAA,GAEA,kCAEA,iCAEAa,EAAAA,KAAAA,KAAAA,GAEA,8BAEA,yBACA,2HAGA,kCACA,SACA,YACA,QAEA,qCACA,qCAEA,WAEA,qCAEA,oBACAC,EAAAA,KAAAA,YAAAA,GAEAA,EAAAA,KAAAA,KAAAA,GAEA,YAEA,0BAGA,GAFAC,IAEA,MAEA,eAEAA,GAAAA,KAAAA,OAAAA,EAAAA,GAAAA,GAAAA,EAEAC,EAAAA,CAAAA,CACA,MAEAA,EAAAA,GAAAA,CAEA,CAGA,sCACA,sCAEA,0HACA,EACAC,KAAAA,SAAAA,GAEA,kBACA,8BACA,gGAEA,ICtG6P,I,UCOzPC,GAAY,OACd,EACA5B,EACAW,GACA,EACA,KACA,KACA,MAIF,EAAeiB,EAAiB,O","sources":["webpack://advent-of-code/./src/components/2023/Day14.vue?c037","webpack://advent-of-code/src/components/2023/Day14.vue","webpack://advent-of-code/./src/components/2023/Day14.vue?c5bf","webpack://advent-of-code/./src/components/2023/Day14.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Day',{attrs:{\"day\":14,\"year\":2023,\"solutions\":_vm.solutions},on:{\"input-changed\":_vm.onInputChanged}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Day :day=\"14\" :year=\"2023\" :solutions=\"solutions\" @input-changed=\"onInputChanged\">\n  </Day>\n</template>\n\n<script>\nimport Day from '@/components/Day'\n\nexport default {\n  components: {\n    Day\n  },\n  data: function () {\n    return {\n      solutions: {\n        partOne: null,\n        partTwo: null\n      }\n    }\n  },\n  methods: {\n    rotateLeft: function (array) {\n      const result = []\n      array.forEach((a, i) => {\n        a.forEach((b, j, bb) => {\n          result[bb.length - j - 1] = result[bb.length - j - 1] || []\n          result[bb.length - j - 1][i] = b\n        })\n      })\n      return result\n    },\n    rotateRight: function (array) {\n      const result = []\n      array.forEach((a, i, aa) => {\n        a.forEach((b, j) => {\n          result[j] = result[j] || []\n          result[j][aa.length - i - 1] = b\n        })\n      })\n      return result\n    },\n    onInputChanged: function (input) {\n      // Parse grid\n      this.grid = input.map(i => i.split(''))\n      // Rotate to the left\n      let northLeft = this.rotateLeft(this.grid)\n      // Tilt by splitting, sorting and joining\n      northLeft = this.tilt(northLeft)\n      // Rotate back\n      this.grid = this.rotateRight(northLeft)\n      // Calculate result\n      const height = this.grid.length\n      this.solutions.partOne = this.grid.map((row, y) => row.map((c, x) => c === 'O' ? height - y : 0).reduce((a, b) => a + b, 0)).reduce((a, b) => a + b, 0)\n\n      // Read grid again\n      this.grid = input.map(i => i.split(''))\n      let cache = {}\n      const spinCycles = 1_000_000_000\n      let cycle = 0\n      // Rotate it left twice, so that North is pointing down\n      this.grid = this.rotateLeft(this.grid)\n      this.grid = this.rotateLeft(this.grid)\n\n      while (cycle < spinCycles) {\n        // Take a copy\n        let temp = this.grid.map(row => row.concat())\n        // Rotate if four times (first rotation will make North face left so we can tilt it)\n        for (let r = 0; r < 4; r++) {\n          temp = this.rotateRight(temp)\n          // Then tilt\n          temp = this.tilt(temp)\n        }\n        this.grid = temp\n        // Stringify for cache comparison\n        const stringified = JSON.stringify(temp)\n        cycle++\n\n        if (cache[stringified]) {\n          // If we've seen this configuration before\n          const cycleLength = cycle - cache[stringified]\n          // Advance the cycle by as many times as it fits into the cycleLength\n          cycle += Math.floor((spinCycles - cycle) / cycleLength) * cycleLength\n          // Then clear the cache\n          cache = {}\n        } else {\n          // Else add to the cache\n          cache[stringified] = cycle\n        }\n      }\n\n      // Rotate back so that North is up again\n      this.grid = this.rotateRight(this.grid)\n      this.grid = this.rotateRight(this.grid)\n      // Calculate result\n      this.solutions.partTwo = this.grid.map((row, y) => row.map((c, x) => c === 'O' ? height - y : 0).reduce((a, b) => a + b, 0)).reduce((a, b) => a + b, 0)\n    },\n    tilt: function (grid) {\n      // We achieve the tilt by splitting each row on \"#\"s, then sorting each section which will sort \"O\"s before \".\"s, then join back together with \"#\"s.\n      return grid.map(row => {\n        const parts = row.join('').split('#')\n        return parts.map(p => p.split('').sort((a, b) => b.localeCompare(a)).join('')).join('#').split('')\n      })\n    }\n  }\n}\n</script>\n\n<style>\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Day14.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Day14.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Day14.vue?vue&type=template&id=2a35edae\"\nimport script from \"./Day14.vue?vue&type=script&lang=js\"\nexport * from \"./Day14.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","solutions","on","onInputChanged","staticRenderFns","components","Day","data","partOne","partTwo","methods","rotateLeft","array","a","result","rotateRight","northLeft","temp","cycle","cache","tilt","component"],"sourceRoot":""}