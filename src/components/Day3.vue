<template>
  <Day :day="3" :solutions="solutions" :taskInput="taskInput" @input-changed="onInputChanged" />
</template>

<script>
import Day from '@/components/Day'

export default {
  components: {
    Day
  },
  data: function () {
    return {
      taskInput: '....#...##.#.........#....#....\n#.......#...#...#.#............\n#..#..#.#.##....#.#........#...\n........##...................#.\n........#...##...#.#.###.......\n##............#...#.....#.##...\n...........#....###...#.....#..\n.......#......#..##..#.....#...\n..#.#..#....#.........#...#..#.\n.........##......#.....##..##..\n........#.....#....#..##......#\n..#..#.......#..............#..\n.....#.#.......................\n.#.#....#.........#............\n.......#.....#.###.............\n......##......#...........#..#.\n.#...............##...#........\n.....#..##........###.........#\n#...........#..#............#..\n.........#....#..#.#......#....\n.......#.........#..##.........\n.##.....#..................#...\n....#............#.#....#.....#\n..#....#...##....#...#.#...#...\n..........#................#.#.\n#...#.#.#.####..#.#..........#.\n..#...#.##......#...........#..\n..#.....#...#.......#......#..#\n..............#.......#........\n.#..#..........#.....#...#..#.#\n#........#...#......#.......#..\n#..................#...........\n..#...#........#...#..#........\n..............#.....#.....#..#.\n#.#.......#..............##.##.\n....#.#.....##....#...........#\n......#....#...#..#.......#....\n....#..#.#.....#..##.....#....#\n...........#.......#.#.#.......\n#.......#..##........#..#......\n.........#.##..#..............#\n...........#............###.#..\n..#.....#.....##...#.........#.\n....##............##........#..\n.....###..........#......##....\n#...##..#..#..........#........\n....#.....#.......#..#.#...##..\n.#....#........#.#.........#.#.\n##...#.#.....#......#..........\n.....##.....#....#.....###.#..#\n..............#..###..#...#..#.\n....#...#....#.............#.#.\n.#.........#.....#........#.##.\n....#.........#..........#.....\n.......#........#.#.#..........\n#........##....#.........#.....\n..##..........#....#.#...#....#\n#...#.#......#..##..........#.#\n.....#..#...#..#...............\n#...#..............#...........\n.#...#....#..##.....#....#.#...\n.#...#.......#...#..#.##....#..\n#....#........#....#...#.......\n#..#......#.....#.....#..##....\n......#.#....##....##..#...#...\n..#....#.#.###..............#..\n.#.##.......#.#.#..#...#..#....\n..#..........#.#....#..#.#....#\n..........#...#...#..........#.\n..........#.....#.#..#..#....##\n.#.#...##...#...........####...\n........##..#.#..........#.##.#\n#......###...........#...#.....\n..#.#....##.........##....#....\n#....#.##..##..#..#.....#.....#\n.##.....##....##....#.......#..\n#...#.....##....#..........#...\n............#.#.##....#....#...\n....#............#.....#......#\n....................#..........\n..#....................#..#....\n....#.....#........#..##...#...\n#.....#.#....................##\n.#....#.#.#...#..........#....#\n....#...#......#...#.....##...#\n.....#.........................\n.......#..#.#...#...#...#.....#\n...#......#.##.#...#..#...##.#.\n...........................#..#\n..#.#.....#........##..........\n....#...##........#.#.#..#...##\n..##.....#..###.........##.##..\n.#..#.....#...#.............#..\n#..............##...#....##....\n.##......#.#............#......\n.............##...#.#.......#..\n.........#..#..#...............\n........##......#....##........\n...#.........#.#.#.............\n#..........#......#......#..#..\n.............##.#.#..#.#.#...#.\n.....#.........#...............\n..##.#..#.....##..#........#.#.\n.#..........#.#.......#......##\n.#........................#....\n#....#....#...#..#......#......\n........#.......#......#.....#.\n.....#....##..#...###...#....#.\n....#.........#....#......#....\n.............#...#....#.......#\n.....#.........#..#.#..........\n.........#..#........#.#.#.....\n......#.##......#....#.#.##.#..\n.#...#.#...#...#.#......#....##\n.#................#......#.....\n#.#.#...............#..........\n.....#.#.......#...#........#..\n#...#.#.#.##..#...........#..#.\n.............###.........#....#\n.#.....#.......##....##.......#\n....#...#.......#.##.....#.....\n...........##.........#...#....\n..............#.#..#.....#..#..\n#.#...#..#.#.........#......#.#\n#.##.....##....#........#.#.#.#\n##.#.###.........##.......#..#.\n#.....#.....................#..\n.........##........#...........\n.###........##....#...#........\n....#.#........##...........#..\n..........#.....#..........#..#\n......#..............#......#..\n.....#...#......#...#...#......\n..........#.#..#....#...#..###.\n#..##........#................#\n..#............................\n.....#.........#.#.............\n........#...#.....#...##......#\n..#........#................#..\n......#....#..#......#.........\n...........##....#..#.#........\n.....#.............###.........\n#............#......#..#.......\n..#..#.................#..#..##\n.......#......#.....#........#.\n....................#..#.##...#\n.#..##...............##...#....\n...#...#....#........#.........\n.....##...#.....###............\n.###.........#........#.....##.\n.............#...#.............\n...#.#...............#..##..#.#\n...#...............#..#.....#..\n....#.#..................#...#.\n..........#...........#.#...###\n#...#......#................#..\n...#.#.......#...#......#.##...\n......#..........#.............\n##.......#.##.#...........#....\n......#...#.#.....#............\n.#.....#.....#.....#.........#.\n..................#............\n.#.#.#.....#......#.##.........\n.......#..##.##......#..#....#.\n...#.#.#......#...#........#...\n..#............#......#.......#\n..#......#........#.........#..\n..#..#.#.#.....#.............#.\n..#.#..##......#...#...##......\n.##...#....##.#.#...........#..\n..............#..#...#....#....\n.......#.#........#............\n.....##..###........#..........\n......................#........\n..##....#....#.................\n.##.#.###.#........#.##..#...#.\n##................#...........#\n....#..##.....##...............\n.#.....#..#............#.....#.\n#.........#..............#.....\n...##.#......#...#.............\n................#..............\n...#.....#....##...#..#....#...\n..............##..#...#.##..#..\n......................#..#....#\n.......#....#..#.##.........#.#\n#...#........##.......#........\n...##...............#.....#....\n.##...##...#...................\n.........##.#...#.........#....\n............#............#..#..\n.............................#.\n....#.#....#...................\n......#......#...#..##.........\n#........#.#.#.#.#......#....#.\n.#.........#.#...#......#..#.#.\n..............#....##.........#\n.#.......#..#....#.#.#....#....\n...###.#.#..#...#....#....#....\n#........#....................#\n......#...##.###..#..##...#....\n.....#........#.......#........\n#..#...........#.#.............\n....##.#...#..##............##.\n#.#..##..#...#...#.....#.......\n..#.............#.##..#...#.##.\n.#.....##.#..#...#...........#.\n....#...#....................##\n....##......#.###......#......#\n...#...#.........#..#.##....#..\n#......#..#....###.........#...\n#...........##.............#.#.\n#..............##....#......#..\n.........#...#.#...#...#.......\n....#....#............#.......#\n........#...#....#......##.....\n..........#.#..#.........#.....\n#........#.##....##......#.....\n...#.......#...................\n###...#...#..#.##....#.....#...\n........##..........#.##..#....\n.....#......#..#.....#.....#.#.\n...#..#..##..###.....##.#......\n#..#......##...#............#..\n#............#....#..#.........\n#........#.......#......#..##.#\n...#.#.........#.#.............\n#..............#..............#\n#.#......#..........##.........\n#..##...........#..##...#......\n.....#.#.....#......#.....#.#.#\n.#.##...#...##...........#....#\n#.............#........#.......\n..##.............#...#.........\n....#.#......###....#..........\n...#..#.....#..##.#....#...#.#.\n.............##................\n#.#............#........#..#.#.\n.#......#.....#...........#....\n...#.........#...........#.##..\n.....#...#.....#..#..........#.\n........#.#...............#.#..\n.......#..#..#.....#.......##..\n.#...#...#..#...##...#.........\n..........##....#..#.##..#.....\n....#.................#...#....\n.........#...#......#....#....#\n.........#..#...#.##........##.\n#.#....##.......#.#............\n##.......##..................#.\n......#...#......##............\n##.#...#.#...........#..#......\n.........#.........#..#.#...#..\n.#...#.......#.#...###.........\n................#.#.....#......\n..#...#.....#........#.........\n.........##.###.#.#.....#...#..\n#..#..........#....#.#...#...##\n##.#.#....#..##.............#.#\n.###....#..#...............##..\n............#......#.#.#....#..\n........#...#..#...#...........\n##.........#................#..\n...###...#.#..#...#..........##\n...#......#......##........#...\n.......#............#..........\n.....#.....##....#.....###.....\n.#...#...#.....#..#..#....#..#.\n#.#........#..#.......##...#.##\n.....#.....##..#.##........#..#\n.....#...#...........#.........\n..#....#.#...#..#....##...#...#\n...........#...##.........#....\n..#....#....##........#.####...\n#.............#.#.............#\n...................#.....#.#..#\n.#....#.#.............#.#......\n#...........#............#.#...\n..#.........#.#....#.......##..\n#....####......#...#......#....\n....##....#...................#\n....#.##....#.............#....\n.........##........#.....#..#..\n............#...#..............\n............#..##....#.....##.#\n............#.....#......#.....\n........#..#........##.#.......\n...#.#........#..............#.\n............#.........#..#.#...\n................#.............#\n..##..........##......#.#......\n..#..#.##....#.........#...#...\n...........##...#.#.#..........\n.#.#.......#.#...#.........#...\n.........#..#........#..#.#....\n..........##..#.##....#....#...\n....#...............#.......#..\n##..........##.................\n....#.#.#.....#..........##.#..\n..............#.##..........##.\n##...............#...#..#......\n..#..#..........#......#.......\n#...#..##.#.#..................\n....#....##......##.#...#....##\n.#...#.#....##.............#..#\n................#......###.....\n..#..#.............#.#.......#.\n..#..................#.......#.\n.....#.......#....#.##...#.##..\n.....##.......#......#..#......\n#..#.......#........#..........\n..#...#..#....#.........#......\n#..#..#......##..#.##....####..\n......##.#.....#..#.......#....\n.##...#.....#..#...#.#.........\n#.....#........###....#...#..#.\n.#....#.#..#......#............\n.........#..#..#.....#........#\n..#.......#..........#..#......\n......#.......##.#....#.#.#....\n.#............#.....#.......#..\n...#..#...............#........\n.....#.........................',
      solutions: {
        partOne: null,
        partTwo: null
      },
      parsedInput: []
    }
  },
  methods: {
    onInputChanged: function (input) {
      this.parsedInput = input.map(r => {
        return r.split('').map(c => c === '#')
      })
      this.solvePartOne()
      this.solvePartTwo()
    },
    solvePartOne: function () {
      this.solutions.partOne = this.checkSlope(3, 1)
    },
    solvePartTwo: function (input) {
      const slopes = [
        [1, 1],
        [3, 1],
        [5, 1],
        [7, 1],
        [1, 2]
      ]

      this.solutions.partTwo = slopes.map(s => this.checkSlope(s[0], s[1]))
        .reduce((a, b) => a * b, 1)
    },
    checkSlope: function (deltaX, deltaY) {
      let counter = 0
      let x = 0
      for (let y = deltaY; y < this.parsedInput.length; y += deltaY) {
        x = (x + deltaX) % this.parsedInput[y].length
        if (this.parsedInput[y][x]) {
          counter++
        }
      }

      return counter
    }
  }
}
</script>

<style>

</style>
